{"config":{"indexing":"full","lang":["fr"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Notes Table of contents Documentations Django Linux Keycloak Git G\u00e9n\u00e9ral On the Importance of Naming in Programming Architecture logicielle The Twelve-Factor App Tips for analyzing logs The Architecture Behind A One-Person Tech Startup Frontend Naming things is hard, SPA edition How To Hydrate A Server-Side Rendered Web Component How To Server-Side Render A Web Component Analyser le comportement r\u00e9seau pour am\u00e9liorer FCP et LCP OKLCH in CSS: why we moved from RGB and HSL Git git rebase: what can go wrong? PostgreSQL Explaining The Postgres Meme Don't Do This Schemalint Docker Orbstack","title":"Accueil"},{"location":"#notes","text":"","title":"Notes"},{"location":"#table-of-contents","text":"Documentations Django Linux Keycloak Git","title":"Table of contents"},{"location":"#general","text":"On the Importance of Naming in Programming","title":"G\u00e9n\u00e9ral"},{"location":"#architecture-logicielle","text":"The Twelve-Factor App Tips for analyzing logs The Architecture Behind A One-Person Tech Startup","title":"Architecture logicielle"},{"location":"#frontend","text":"Naming things is hard, SPA edition How To Hydrate A Server-Side Rendered Web Component How To Server-Side Render A Web Component Analyser le comportement r\u00e9seau pour am\u00e9liorer FCP et LCP OKLCH in CSS: why we moved from RGB and HSL","title":"Frontend"},{"location":"#git","text":"git rebase: what can go wrong?","title":"Git"},{"location":"#postgresql","text":"Explaining The Postgres Meme Don't Do This Schemalint","title":"PostgreSQL"},{"location":"#docker","text":"Orbstack","title":"Docker"},{"location":"git/","text":"Git Commandes utiles Diff git diff Lister les fichiers d'un commit git show --name-only Exemple : commit 44e20c2a834415f760c46ad9a2ece15232fb6116 ( HEAD -> appbg, tag: v0.0.40, origin/master, origin/HEAD, master ) Author: Romain Quencez < 34655643 +romainquencez@users.noreply.github.com> Date: Mon Nov 6 08 :57:04 2023 +0100 Front - Ajoute la balise meta theme-color services/frontend/index.html Log d\u00e9taill\u00e9 git log --all --graph --oneline --decorate Exemple : * 73acb23 ( HEAD -> fix-exploitations, origin/fix-exploitations ) Exploitations - Fix l 'affichage en mobile * 76a1e2b (origin/master, origin/HEAD, master) GitHub - Ajoute le d\u00e9ploiement au push de tag | * 001a478 (origin/deploy, deploy) GitHub - Ajoute le d\u00e9ploiement au push de tag |/ * c09a97c Front - Corrige le nom de l' env * 02d0e97 Front - Ajoute l ' int\u00e9gration Sentry Liens utiles Documentation de Git","title":"git"},{"location":"git/#git","text":"","title":"Git"},{"location":"git/#commandes-utiles","text":"","title":"Commandes utiles"},{"location":"git/#diff","text":"git diff","title":"Diff"},{"location":"git/#lister-les-fichiers-dun-commit","text":"git show --name-only Exemple : commit 44e20c2a834415f760c46ad9a2ece15232fb6116 ( HEAD -> appbg, tag: v0.0.40, origin/master, origin/HEAD, master ) Author: Romain Quencez < 34655643 +romainquencez@users.noreply.github.com> Date: Mon Nov 6 08 :57:04 2023 +0100 Front - Ajoute la balise meta theme-color services/frontend/index.html","title":"Lister les fichiers d'un commit"},{"location":"git/#log-detaille","text":"git log --all --graph --oneline --decorate Exemple : * 73acb23 ( HEAD -> fix-exploitations, origin/fix-exploitations ) Exploitations - Fix l 'affichage en mobile * 76a1e2b (origin/master, origin/HEAD, master) GitHub - Ajoute le d\u00e9ploiement au push de tag | * 001a478 (origin/deploy, deploy) GitHub - Ajoute le d\u00e9ploiement au push de tag |/ * c09a97c Front - Corrige le nom de l' env * 02d0e97 Front - Ajoute l ' int\u00e9gration Sentry","title":"Log d\u00e9taill\u00e9"},{"location":"git/#liens-utiles","text":"Documentation de Git","title":"Liens utiles"},{"location":"keycloak/","text":"Keycloak Principe Realm Un realm est un ensemble d'utilisateurs. Par d\u00e9faut un realm master existe, mais est r\u00e9serv\u00e9 \u00e0 Keycloak et ne doit pas \u00eatre utilis\u00e9 par l'application. Authentification Depuis le front de l'application, l'utilisateur souhaite se connecter. Il est redirig\u00e9 vers le front de connexion de Keycloak, o\u00f9 il peut s'identifier mais aussi demander un nouveau mot de passe si il l'a oubli\u00e9. Une fois ses identifiants renseign\u00e9s et envoy\u00e9s, Keycloak redirige l'utilisateur vers une URL de l'application (callback). L'application a acc\u00e8s \u00e0 un jeton de courte validit\u00e9, qui doit \u00eatre envoy\u00e9 \u00e0 Keycloak pour r\u00e9cup\u00e9rer un jeton d'acc\u00e8s. Ce jeton d'acc\u00e8s devra \u00eatre inclus dans l'ent\u00eate de chaque requ\u00eate HTTP vers l'API de l'application. L'application peut utiliser une biblioth\u00e8que qui va se charger de v\u00e9rifier la validit\u00e9 du jeton, et le cas \u00e9ch\u00e9ant va tenter d'en g\u00e9n\u00e9rer un nouveau. Configuration Un service Keycloak doit \u00eatre cr\u00e9\u00e9. Acc\u00e9der \u00e0 l'admin, et cr\u00e9er un nouveau realm. Get started with Keycloak on Docker","title":"Keycloak"},{"location":"keycloak/#keycloak","text":"","title":"Keycloak"},{"location":"keycloak/#principe","text":"","title":"Principe"},{"location":"keycloak/#realm","text":"Un realm est un ensemble d'utilisateurs. Par d\u00e9faut un realm master existe, mais est r\u00e9serv\u00e9 \u00e0 Keycloak et ne doit pas \u00eatre utilis\u00e9 par l'application.","title":"Realm"},{"location":"keycloak/#authentification","text":"Depuis le front de l'application, l'utilisateur souhaite se connecter. Il est redirig\u00e9 vers le front de connexion de Keycloak, o\u00f9 il peut s'identifier mais aussi demander un nouveau mot de passe si il l'a oubli\u00e9. Une fois ses identifiants renseign\u00e9s et envoy\u00e9s, Keycloak redirige l'utilisateur vers une URL de l'application (callback). L'application a acc\u00e8s \u00e0 un jeton de courte validit\u00e9, qui doit \u00eatre envoy\u00e9 \u00e0 Keycloak pour r\u00e9cup\u00e9rer un jeton d'acc\u00e8s. Ce jeton d'acc\u00e8s devra \u00eatre inclus dans l'ent\u00eate de chaque requ\u00eate HTTP vers l'API de l'application. L'application peut utiliser une biblioth\u00e8que qui va se charger de v\u00e9rifier la validit\u00e9 du jeton, et le cas \u00e9ch\u00e9ant va tenter d'en g\u00e9n\u00e9rer un nouveau.","title":"Authentification"},{"location":"keycloak/#configuration","text":"Un service Keycloak doit \u00eatre cr\u00e9\u00e9. Acc\u00e9der \u00e0 l'admin, et cr\u00e9er un nouveau realm. Get started with Keycloak on Docker","title":"Configuration"},{"location":"linux/","text":"Linux Table of contents Commands Get last lines of file Directory structure Network services Commands history Shell history history | less Same, browsable with keyboard watch \u2018<command>\u2019 Run command each X seconds (3 default) and print result htop Command-line task manager <command> | grep <filter> Filter a result Get last lines of file https://www.computerhope.com/unix/utail.htm tail <file> <file> show last lines from this file. -f update lines in real-time. -n <lines> show last X lines (10 by default). Directory structure /bin system's base commands. /boot necessary files for booting. /dev store devices informations (hard disk for example). /etc configuration files. /home personal folders of users. /lib shared libs (.so). Like .dll in Windows. /lost+found store lost/found files in case of disk crash. /media for removable devices (USB key, SD card...). /mnt for temporary mounted devices (optical disk...). /opt programs add-ons. /proc fake directory with system informations (CPU, RAM...) /root personal directory of root user. /sbin important system programs. /tmp temporary files. They will be deleted. /usr user's programs. /var variables files, like logs. Network services systemctl <command> <service> Administrator rights needed. Commands start stop restart enable disable Services Docker, etc...","title":"Linux"},{"location":"linux/#linux","text":"","title":"Linux"},{"location":"linux/#table-of-contents","text":"Commands Get last lines of file Directory structure Network services","title":"Table of contents"},{"location":"linux/#commands","text":"history Shell history history | less Same, browsable with keyboard watch \u2018<command>\u2019 Run command each X seconds (3 default) and print result htop Command-line task manager <command> | grep <filter> Filter a result","title":"Commands"},{"location":"linux/#get-last-lines-of-file","text":"https://www.computerhope.com/unix/utail.htm tail <file> <file> show last lines from this file. -f update lines in real-time. -n <lines> show last X lines (10 by default).","title":"Get last lines of file"},{"location":"linux/#directory-structure","text":"/bin system's base commands. /boot necessary files for booting. /dev store devices informations (hard disk for example). /etc configuration files. /home personal folders of users. /lib shared libs (.so). Like .dll in Windows. /lost+found store lost/found files in case of disk crash. /media for removable devices (USB key, SD card...). /mnt for temporary mounted devices (optical disk...). /opt programs add-ons. /proc fake directory with system informations (CPU, RAM...) /root personal directory of root user. /sbin important system programs. /tmp temporary files. They will be deleted. /usr user's programs. /var variables files, like logs.","title":"Directory structure"},{"location":"linux/#network-services","text":"systemctl <command> <service> Administrator rights needed.","title":"Network services"},{"location":"linux/#commands_1","text":"start stop restart enable disable","title":"Commands"},{"location":"linux/#services","text":"Docker, etc...","title":"Services"},{"location":"php/","text":"PHP Syntaxe PHP inclut \u00e9galement la balise courte echo <?=, qui est un raccourci pour <?php echo. Vous pouvez utiliser la balise courte pour <?= '\u00e9crire ce texte' ?> . Est \u00e9quivalent \u00e0 <?php echo '\u00e9crire ce texte' ?> . Pour assigner par r\u00e9f\u00e9rence, ajoutez simplement un & (ET commercial) au d\u00e9but de la variable qui est assign\u00e9e (la variable source). $foo = 'Pierre' ; // Assigne la valeur 'Pierre' \u00e0 $foo $bar = & $foo ; // R\u00e9f\u00e9rence $foo avec $bar. Op\u00e9rateur de contr\u00f4le d'erreur PHP supporte un op\u00e9rateur de contr\u00f4le d'erreur : l'arobase (@). Lorsque cet op\u00e9rateur est ajout\u00e9 en pr\u00e9fixe d'une expression PHP, les diagnostics d'erreurs qui peuvent \u00eatre g\u00e9n\u00e9r\u00e9s par cette expression seront ignor\u00e9s. $value = @ $cache [ $key ]; // la ligne ci-dessus n'affichera pas d'alerte si la cl\u00e9 $key du tableau n'existe pas Op\u00e9rateurs fonctionnels L'op\u00e9rateur |> , ou \u00ab pipe \u00bb, accepte une fonction callable \u00e0 un seul param\u00e8tre \u00e0 droite et lui transmet la valeur de gauche, le r\u00e9sultat \u00e9tant la valeur renvoy\u00e9e par la fonction callable. $result = \"PHP Rocks\" |> htmlentities ( ... ) |> str_split ( ... ) |> ( fn ( $x ) => array_map ( strtoupper ( ... ), $x )) |> ( fn ( $x ) => array_filter ( $x , fn ( $v ) => $v != 'O' )) ; Fonctions fl\u00e9ch\u00e9es Les fonctions fl\u00e9ch\u00e9es supportent les m\u00eames fonctionnalit\u00e9s que les fonctions anonymes, \u00e0 l'exception que l'utilisation des variables de la port\u00e9e parente est automatique. $fn1 = fn ( $x ) => $x + $y ; Variables globales Le mot-cl\u00e9 global est utilis\u00e9 pour lier une variable de la port\u00e9e globale dans une port\u00e9e locale. Une deuxi\u00e8me m\u00e9thode pour acc\u00e9der aux variables globales est d'utiliser le tableau associatif pr\u00e9-d\u00e9fini $GLOBALS . $a = 1 ; $b = 2 ; function somme () { global $a , $b ; $b = $a + $b ; } somme (); echo $b ; Variables statiques Une variable statique a une port\u00e9e locale uniquement, mais elle ne perd pas sa valeur lorsque le script appelle la fonction. function test () { static $a = 0 ; echo $a ; $a ++ ; } Maintenant, la variable $a est initialis\u00e9e uniquement lors du premier appel \u00e0 la fonction et, \u00e0 chaque fois que la fonction test() est appel\u00e9e, elle affichera une valeur de $a incr\u00e9ment\u00e9e de 1. Variables dynamiques Une variable dynamique prend la valeur d'une variable et l'utilise comme nom d'une autre variable. $a = 'bonjour' ; // $a avec comme valeur \"bonjour\" $$a = 'monde' ; // $bonjour avec comme valeur \"monde\" Variables superglobales Les variables internes qui sont toujours disponibles, quel que soit le contexte. $GLOBALS : R\u00e9f\u00e9rence toutes les variables disponibles dans un contexte global $_SERVER : Variables de serveur et d'ex\u00e9cution $_GET : Variables de cha\u00eene de requ\u00eate $_POST : Donn\u00e9es de formulaire depuis des requ\u00eates HTTP POST $_FILES : Variable de t\u00e9l\u00e9chargement de fichier via HTTP $_COOKIE : Cookies HTTP $_SESSION : Variables de session $_REQUEST : Variables de requ\u00eate HTTP $_ENV : Variables d'environnement https://www.php.net/manual/fr/language.variables.superglobals.php Classes class SimpleClass { // d\u00e9claration d'une propri\u00e9t\u00e9 public $var = 'une valeur par d\u00e9faut' ; // d\u00e9claration des m\u00e9thodes public function displayVar () { echo $this -> var ; } } La pseudo-variable $this est disponible lorsqu'une m\u00e9thode est appel\u00e9e depuis un contexte objet. $this est la valeur de l'objet appelant. es m\u00e9thodes et propri\u00e9t\u00e9s peuvent aussi \u00eatre acc\u00e9d\u00e9s avec l'op\u00e9rateur \"nullsafe\": ?-> $result = $repository ?-> getUser ( 5 ) ?-> name ; Le mot-cl\u00e9 final emp\u00eache les classes enfants de red\u00e9finir une m\u00e9thode, une propri\u00e9t\u00e9 ou constante en pr\u00e9fixant la d\u00e9finition avec final . Si la classe elle-m\u00eame est d\u00e9finie comme finale, elle ne pourra pas \u00eatre \u00e9tendue. class BaseClass { public function test () { echo \"BaseClass::test() appel\u00e9e \\n \" ; } final public function moreTesting () { echo \"BaseClass::moreTesting() appel\u00e9e \\n \" ; } } Constructeur PHP permet aux d\u00e9veloppeurs de d\u00e9clarer des constructeurs pour les classes. Les classes qui poss\u00e8dent une m\u00e9thode constructeur appellent cette m\u00e9thode \u00e0 chaque cr\u00e9ation d'une nouvelle instance de l'objet, ce qui est int\u00e9ressant pour toutes les initialisations dont l'objet a besoin avant d'\u00eatre utilis\u00e9. class BaseClass { function __construct () { print \"Dans le constructeur de BaseClass \\n \" ; } } Abstraction de classes PHP a des classes, m\u00e9thodes et propri\u00e9t\u00e9s abstraites. Les classes d\u00e9finies comme abstraites ne peuvent pas \u00eatre instanci\u00e9es, et toute classe contenant au moins une m\u00e9thode abstraite doit elle-aussi \u00eatre abstraite. abstract class AbstractClass { // Force les classes filles \u00e0 d\u00e9finir cette m\u00e9thode abstract protected function getValue (); abstract protected function prefixValue ( $prefix ); // m\u00e9thode commune public function printOut () { print $this -> getValue () . \" \\n \" ; } } \u00c9num\u00e9rations enum Suit { case Hearts ; case Diamonds ; case Clubs ; case Spades ; } Interfaces Les interfaces d'objets permettent de cr\u00e9er du code qui sp\u00e9cifie quelles m\u00e9thodes et propri\u00e9t\u00e9s une classe doit impl\u00e9menter, sans avoir \u00e0 d\u00e9finir comment ces m\u00e9thodes ou propri\u00e9t\u00e9s sont impl\u00e9ment\u00e9es. interface I { // Une classe impl\u00e9mentant cette interface DOIT avoir une propri\u00e9t\u00e9 publiquement lisible, // mais que celle-ci soit ou non modifiable publiquement n'est pas restreint. public string $readable { get ; } // Une classe impl\u00e9mentant cette interface DOIT avoir une propri\u00e9t\u00e9 publiquement modifiable, // mais que celle-ci soit ou non lisible publiquement n'est pas restreint. public string $writeable { set ; } // Une classe impl\u00e9mentant cette interface DOIT avoir une propri\u00e9t\u00e9 qui est \u00e0 la fois publiquement // lisible et publiquement modifiable. public string $both { get ; set ; } } Traits Les traits sont un m\u00e9canisme de r\u00e9utilisation de code dans un langage \u00e0 h\u00e9ritage simple tel que PHP. trait TraitA { public function sayHello () { echo 'Hello' ; } } class MyHelloWorld { use TraitA ; public function sayHelloWorld () { $this -> sayHello (); echo \"! \\n \" ; } } Types En PHP, chaque expression a l'un des types int\u00e9gr\u00e9s suivants en fonction de sa valeur: null : Le type null est le type unit\u00e9 de PHP, c'est-\u00e0-dire qu'il n'a qu'une seule valeur: null . bool : Le type bool ne poss\u00e8de que deux valeurs, et est utilis\u00e9 pour exprimer une valeur de v\u00e9rit\u00e9. Il peut \u00eatre soit true soit false . int : Un entier est un nombre appartenant \u00e0 l'ensemble \u2124 = {..., -2, -1, 0, 1, 2, ...}. float : nombre \u00e0 virgule flottante string array => dict object callable resource mixed : accepte toutes les valeurs void : est une d\u00e9claration de type de retour uniquement, indiquant que la fonction ne retourne pas de valeur, mais que la fonction peut quand m\u00eame se terminer. never : never est uniquement un type de retour indiquant que la fonction ne se termine pas. Types de classes relatives self : La valeur doit \u00eatre une instance de la m\u00eame classe que celle dans laquelle la d\u00e9claration de type est utilis\u00e9e. parent : La valeur doit \u00eatre une instance d'un parent de la classe dans laquelle la d\u00e9claration de type est utilis\u00e9e. static : static est un type de retour uniquement qui exige que la valeur retourn\u00e9e soit une instance de la m\u00eame classe que celle sur laquelle la m\u00e9thode est appel\u00e9e. Type cast Le casting de type converti la valeur \u00e0 un type donn\u00e9e en \u00e9crivant le type entre parenth\u00e8se avant la valeur \u00e0 convertir. (int) - cast en int (bool) - cast en bool (float) - cast en float (string) - cast en string (array) - cast en array (object) - cast en object (unset) - cast en NULL Fonctions utiles array_filter : Filtre les \u00e9l\u00e9ments d'un tableau gr\u00e2ce \u00e0 une fonction de rappel array_find : Retourne le premier \u00e9l\u00e9ment validant la fonction de rappel array_map : Applique une fonction sur les \u00e9l\u00e9ments d'un tableau explode : Scinde une cha\u00eene de caract\u00e8res en segments htmlspecialchars : Convertit les caract\u00e8res sp\u00e9ciaux en entit\u00e9s HTML is_null : Indique si une variable vaut null isset : D\u00e9termine si une variable est d\u00e9clar\u00e9e et est diff\u00e9rente de null nl2br : Ins\u00e8re un retour \u00e0 la ligne HTML \u00e0 chaque nouvelle ligne str_contains : D\u00e9termine si une cha\u00eene contient une sous-cha\u00eene donn\u00e9e urlencode : Encode une cha\u00eene en URL var_dump : Affiche les informations d'une variable","title":"PHP"},{"location":"php/#php","text":"","title":"PHP"},{"location":"php/#syntaxe","text":"PHP inclut \u00e9galement la balise courte echo <?=, qui est un raccourci pour <?php echo. Vous pouvez utiliser la balise courte pour <?= '\u00e9crire ce texte' ?> . Est \u00e9quivalent \u00e0 <?php echo '\u00e9crire ce texte' ?> . Pour assigner par r\u00e9f\u00e9rence, ajoutez simplement un & (ET commercial) au d\u00e9but de la variable qui est assign\u00e9e (la variable source). $foo = 'Pierre' ; // Assigne la valeur 'Pierre' \u00e0 $foo $bar = & $foo ; // R\u00e9f\u00e9rence $foo avec $bar.","title":"Syntaxe"},{"location":"php/#operateur-de-controle-derreur","text":"PHP supporte un op\u00e9rateur de contr\u00f4le d'erreur : l'arobase (@). Lorsque cet op\u00e9rateur est ajout\u00e9 en pr\u00e9fixe d'une expression PHP, les diagnostics d'erreurs qui peuvent \u00eatre g\u00e9n\u00e9r\u00e9s par cette expression seront ignor\u00e9s. $value = @ $cache [ $key ]; // la ligne ci-dessus n'affichera pas d'alerte si la cl\u00e9 $key du tableau n'existe pas","title":"Op\u00e9rateur de contr\u00f4le d'erreur"},{"location":"php/#operateurs-fonctionnels","text":"L'op\u00e9rateur |> , ou \u00ab pipe \u00bb, accepte une fonction callable \u00e0 un seul param\u00e8tre \u00e0 droite et lui transmet la valeur de gauche, le r\u00e9sultat \u00e9tant la valeur renvoy\u00e9e par la fonction callable. $result = \"PHP Rocks\" |> htmlentities ( ... ) |> str_split ( ... ) |> ( fn ( $x ) => array_map ( strtoupper ( ... ), $x )) |> ( fn ( $x ) => array_filter ( $x , fn ( $v ) => $v != 'O' )) ;","title":"Op\u00e9rateurs fonctionnels"},{"location":"php/#fonctions-flechees","text":"Les fonctions fl\u00e9ch\u00e9es supportent les m\u00eames fonctionnalit\u00e9s que les fonctions anonymes, \u00e0 l'exception que l'utilisation des variables de la port\u00e9e parente est automatique. $fn1 = fn ( $x ) => $x + $y ;","title":"Fonctions fl\u00e9ch\u00e9es"},{"location":"php/#variables-globales","text":"Le mot-cl\u00e9 global est utilis\u00e9 pour lier une variable de la port\u00e9e globale dans une port\u00e9e locale. Une deuxi\u00e8me m\u00e9thode pour acc\u00e9der aux variables globales est d'utiliser le tableau associatif pr\u00e9-d\u00e9fini $GLOBALS . $a = 1 ; $b = 2 ; function somme () { global $a , $b ; $b = $a + $b ; } somme (); echo $b ;","title":"Variables globales"},{"location":"php/#variables-statiques","text":"Une variable statique a une port\u00e9e locale uniquement, mais elle ne perd pas sa valeur lorsque le script appelle la fonction. function test () { static $a = 0 ; echo $a ; $a ++ ; } Maintenant, la variable $a est initialis\u00e9e uniquement lors du premier appel \u00e0 la fonction et, \u00e0 chaque fois que la fonction test() est appel\u00e9e, elle affichera une valeur de $a incr\u00e9ment\u00e9e de 1.","title":"Variables statiques"},{"location":"php/#variables-dynamiques","text":"Une variable dynamique prend la valeur d'une variable et l'utilise comme nom d'une autre variable. $a = 'bonjour' ; // $a avec comme valeur \"bonjour\" $$a = 'monde' ; // $bonjour avec comme valeur \"monde\"","title":"Variables dynamiques"},{"location":"php/#variables-superglobales","text":"Les variables internes qui sont toujours disponibles, quel que soit le contexte. $GLOBALS : R\u00e9f\u00e9rence toutes les variables disponibles dans un contexte global $_SERVER : Variables de serveur et d'ex\u00e9cution $_GET : Variables de cha\u00eene de requ\u00eate $_POST : Donn\u00e9es de formulaire depuis des requ\u00eates HTTP POST $_FILES : Variable de t\u00e9l\u00e9chargement de fichier via HTTP $_COOKIE : Cookies HTTP $_SESSION : Variables de session $_REQUEST : Variables de requ\u00eate HTTP $_ENV : Variables d'environnement https://www.php.net/manual/fr/language.variables.superglobals.php","title":"Variables superglobales"},{"location":"php/#classes","text":"class SimpleClass { // d\u00e9claration d'une propri\u00e9t\u00e9 public $var = 'une valeur par d\u00e9faut' ; // d\u00e9claration des m\u00e9thodes public function displayVar () { echo $this -> var ; } } La pseudo-variable $this est disponible lorsqu'une m\u00e9thode est appel\u00e9e depuis un contexte objet. $this est la valeur de l'objet appelant. es m\u00e9thodes et propri\u00e9t\u00e9s peuvent aussi \u00eatre acc\u00e9d\u00e9s avec l'op\u00e9rateur \"nullsafe\": ?-> $result = $repository ?-> getUser ( 5 ) ?-> name ; Le mot-cl\u00e9 final emp\u00eache les classes enfants de red\u00e9finir une m\u00e9thode, une propri\u00e9t\u00e9 ou constante en pr\u00e9fixant la d\u00e9finition avec final . Si la classe elle-m\u00eame est d\u00e9finie comme finale, elle ne pourra pas \u00eatre \u00e9tendue. class BaseClass { public function test () { echo \"BaseClass::test() appel\u00e9e \\n \" ; } final public function moreTesting () { echo \"BaseClass::moreTesting() appel\u00e9e \\n \" ; } }","title":"Classes"},{"location":"php/#constructeur","text":"PHP permet aux d\u00e9veloppeurs de d\u00e9clarer des constructeurs pour les classes. Les classes qui poss\u00e8dent une m\u00e9thode constructeur appellent cette m\u00e9thode \u00e0 chaque cr\u00e9ation d'une nouvelle instance de l'objet, ce qui est int\u00e9ressant pour toutes les initialisations dont l'objet a besoin avant d'\u00eatre utilis\u00e9. class BaseClass { function __construct () { print \"Dans le constructeur de BaseClass \\n \" ; } }","title":"Constructeur"},{"location":"php/#abstraction-de-classes","text":"PHP a des classes, m\u00e9thodes et propri\u00e9t\u00e9s abstraites. Les classes d\u00e9finies comme abstraites ne peuvent pas \u00eatre instanci\u00e9es, et toute classe contenant au moins une m\u00e9thode abstraite doit elle-aussi \u00eatre abstraite. abstract class AbstractClass { // Force les classes filles \u00e0 d\u00e9finir cette m\u00e9thode abstract protected function getValue (); abstract protected function prefixValue ( $prefix ); // m\u00e9thode commune public function printOut () { print $this -> getValue () . \" \\n \" ; } }","title":"Abstraction de classes"},{"location":"php/#enumerations","text":"enum Suit { case Hearts ; case Diamonds ; case Clubs ; case Spades ; }","title":"\u00c9num\u00e9rations"},{"location":"php/#interfaces","text":"Les interfaces d'objets permettent de cr\u00e9er du code qui sp\u00e9cifie quelles m\u00e9thodes et propri\u00e9t\u00e9s une classe doit impl\u00e9menter, sans avoir \u00e0 d\u00e9finir comment ces m\u00e9thodes ou propri\u00e9t\u00e9s sont impl\u00e9ment\u00e9es. interface I { // Une classe impl\u00e9mentant cette interface DOIT avoir une propri\u00e9t\u00e9 publiquement lisible, // mais que celle-ci soit ou non modifiable publiquement n'est pas restreint. public string $readable { get ; } // Une classe impl\u00e9mentant cette interface DOIT avoir une propri\u00e9t\u00e9 publiquement modifiable, // mais que celle-ci soit ou non lisible publiquement n'est pas restreint. public string $writeable { set ; } // Une classe impl\u00e9mentant cette interface DOIT avoir une propri\u00e9t\u00e9 qui est \u00e0 la fois publiquement // lisible et publiquement modifiable. public string $both { get ; set ; } }","title":"Interfaces"},{"location":"php/#traits","text":"Les traits sont un m\u00e9canisme de r\u00e9utilisation de code dans un langage \u00e0 h\u00e9ritage simple tel que PHP. trait TraitA { public function sayHello () { echo 'Hello' ; } } class MyHelloWorld { use TraitA ; public function sayHelloWorld () { $this -> sayHello (); echo \"! \\n \" ; } }","title":"Traits"},{"location":"php/#types","text":"En PHP, chaque expression a l'un des types int\u00e9gr\u00e9s suivants en fonction de sa valeur: null : Le type null est le type unit\u00e9 de PHP, c'est-\u00e0-dire qu'il n'a qu'une seule valeur: null . bool : Le type bool ne poss\u00e8de que deux valeurs, et est utilis\u00e9 pour exprimer une valeur de v\u00e9rit\u00e9. Il peut \u00eatre soit true soit false . int : Un entier est un nombre appartenant \u00e0 l'ensemble \u2124 = {..., -2, -1, 0, 1, 2, ...}. float : nombre \u00e0 virgule flottante string array => dict object callable resource mixed : accepte toutes les valeurs void : est une d\u00e9claration de type de retour uniquement, indiquant que la fonction ne retourne pas de valeur, mais que la fonction peut quand m\u00eame se terminer. never : never est uniquement un type de retour indiquant que la fonction ne se termine pas.","title":"Types"},{"location":"php/#types-de-classes-relatives","text":"self : La valeur doit \u00eatre une instance de la m\u00eame classe que celle dans laquelle la d\u00e9claration de type est utilis\u00e9e. parent : La valeur doit \u00eatre une instance d'un parent de la classe dans laquelle la d\u00e9claration de type est utilis\u00e9e. static : static est un type de retour uniquement qui exige que la valeur retourn\u00e9e soit une instance de la m\u00eame classe que celle sur laquelle la m\u00e9thode est appel\u00e9e.","title":"Types de classes relatives"},{"location":"php/#type-cast","text":"Le casting de type converti la valeur \u00e0 un type donn\u00e9e en \u00e9crivant le type entre parenth\u00e8se avant la valeur \u00e0 convertir. (int) - cast en int (bool) - cast en bool (float) - cast en float (string) - cast en string (array) - cast en array (object) - cast en object (unset) - cast en NULL","title":"Type cast"},{"location":"php/#fonctions-utiles","text":"array_filter : Filtre les \u00e9l\u00e9ments d'un tableau gr\u00e2ce \u00e0 une fonction de rappel array_find : Retourne le premier \u00e9l\u00e9ment validant la fonction de rappel array_map : Applique une fonction sur les \u00e9l\u00e9ments d'un tableau explode : Scinde une cha\u00eene de caract\u00e8res en segments htmlspecialchars : Convertit les caract\u00e8res sp\u00e9ciaux en entit\u00e9s HTML is_null : Indique si une variable vaut null isset : D\u00e9termine si une variable est d\u00e9clar\u00e9e et est diff\u00e9rente de null nl2br : Ins\u00e8re un retour \u00e0 la ligne HTML \u00e0 chaque nouvelle ligne str_contains : D\u00e9termine si une cha\u00eene contient une sous-cha\u00eene donn\u00e9e urlencode : Encode une cha\u00eene en URL var_dump : Affiche les informations d'une variable","title":"Fonctions utiles"},{"location":"propel/","text":"Propel ORM de Thelia. https://propelorm.org/documentation/ CRUD Instancier une Query : <? php $firstAuthor = AuthorQuery :: create (); R\u00e9cup\u00e9rer des champs : <? php echo $author -> getId (); // 1 echo $author -> getFirstName (); // 'Jane' echo $author -> getLastName (); // 'Austen' R\u00e9cup\u00e9rer une entr\u00e9e depuis son ID : <? php $firstAuthor = AuthorQuery :: create () -> findPK ( 1 ); R\u00e9cup\u00e9rer plusieurs entr\u00e9es depuis leurs IDs : <? php $selectedAuthors = AuthorQuery :: create () -> findPKs ( array ( 1 , 2 , 3 , 4 , 5 , 6 , 7 )); Filtrer les entr\u00e9es (renvoi tout par d\u00e9faut) : <? php $authors = AuthorQuery :: create () -> find ();","title":"Propel"},{"location":"propel/#propel","text":"ORM de Thelia. https://propelorm.org/documentation/","title":"Propel"},{"location":"propel/#crud","text":"Instancier une Query : <? php $firstAuthor = AuthorQuery :: create (); R\u00e9cup\u00e9rer des champs : <? php echo $author -> getId (); // 1 echo $author -> getFirstName (); // 'Jane' echo $author -> getLastName (); // 'Austen' R\u00e9cup\u00e9rer une entr\u00e9e depuis son ID : <? php $firstAuthor = AuthorQuery :: create () -> findPK ( 1 ); R\u00e9cup\u00e9rer plusieurs entr\u00e9es depuis leurs IDs : <? php $selectedAuthors = AuthorQuery :: create () -> findPKs ( array ( 1 , 2 , 3 , 4 , 5 , 6 , 7 )); Filtrer les entr\u00e9es (renvoi tout par d\u00e9faut) : <? php $authors = AuthorQuery :: create () -> find ();","title":"CRUD"},{"location":"symfony/","text":"Symfony Structure bin/ : The famous bin/console file lives here (and other, less important executable files). config/ : Contains configuration. You will configure routes, services and packages. public/ : This is the document root for your project: you put any publicly accessible files here. templates/ : All your Twig templates live here. src/ : All your PHP code lives here. var/ : This is where automatically-created files are stored, like cache files (var/cache/) and logs (var/log/). vendor/ : Third-party (i.e. \"vendor\") libraries live here! These are downloaded via the Composer package manager. Evenements Le contr\u00f4leur v\u00e9rifie et nettoie les entr\u00e9es de la route, puis va \u00e9mettre un \u00e9v\u00e8nement avec la m\u00e9thode dispatch qui prend en argument la constante du nom de l'\u00e9v\u00e8nement. $eventDispatcher -> dispatch ( $customerCreateEvent , TheliaEvents :: CUSTOMER_CREATEACCOUNT ); L'objet \u00e9v\u00e8nement doit \u00eatre cr\u00e9\u00e9 avant avec les diff\u00e9rentes informations : $customerCreateEvent = new ApyCustomerCreateOrUpdateEvent ( $data [ 'title' ] ?? null , $data [ 'firstname' ] ?? null , $data [ 'lastname' ] ?? null ); Une (ou plusieurs) action(s) \u00e9coutent les \u00e9v\u00e8nements et va ex\u00e9cuter \u00e0 la suite des fonctions selon leur priorit\u00e9 (jusqu'\u00e0 256) : $arr [ TheliaEvents :: CUSTOMER_CREATEACCOUNT ] = [ [ 'create' , 127 ], [ 'createCustomerFluxCRM' , 127 ], [ 'beforeCreate' , 129 ], [ 'afterCreate' , 127 ], [ 'updateMainPhone' , 126 ], [ 'createHybridAuthData' , 126 ], [ 'handleIsRetailer' , 126 ] ]; La fonction va recevoir en param\u00e8tre l'\u00e9v\u00e8nement source et son nom, et peut ex\u00e9cuter des actions de persistance : public function create ( CustomerCreateOrUpdateEvent $event , $eventName , EventDispatcherInterface $dispatcher ) : void { $customer = new CustomerModel (); $this -> createOrUpdateCustomer ( $customer , $event , $dispatcher ); } Commandes utiles php bin/console debug:router : Liste toutes les routes php bin/console lint:twig : V\u00e9rifie les templates Twig php bin/console debug:twig : Liste les informations de Twig php bin/console make:controller <nom> : Cr\u00e9e un nouveau contr\u00f4leur","title":"Symfony"},{"location":"symfony/#symfony","text":"","title":"Symfony"},{"location":"symfony/#structure","text":"bin/ : The famous bin/console file lives here (and other, less important executable files). config/ : Contains configuration. You will configure routes, services and packages. public/ : This is the document root for your project: you put any publicly accessible files here. templates/ : All your Twig templates live here. src/ : All your PHP code lives here. var/ : This is where automatically-created files are stored, like cache files (var/cache/) and logs (var/log/). vendor/ : Third-party (i.e. \"vendor\") libraries live here! These are downloaded via the Composer package manager.","title":"Structure"},{"location":"symfony/#evenements","text":"Le contr\u00f4leur v\u00e9rifie et nettoie les entr\u00e9es de la route, puis va \u00e9mettre un \u00e9v\u00e8nement avec la m\u00e9thode dispatch qui prend en argument la constante du nom de l'\u00e9v\u00e8nement. $eventDispatcher -> dispatch ( $customerCreateEvent , TheliaEvents :: CUSTOMER_CREATEACCOUNT ); L'objet \u00e9v\u00e8nement doit \u00eatre cr\u00e9\u00e9 avant avec les diff\u00e9rentes informations : $customerCreateEvent = new ApyCustomerCreateOrUpdateEvent ( $data [ 'title' ] ?? null , $data [ 'firstname' ] ?? null , $data [ 'lastname' ] ?? null ); Une (ou plusieurs) action(s) \u00e9coutent les \u00e9v\u00e8nements et va ex\u00e9cuter \u00e0 la suite des fonctions selon leur priorit\u00e9 (jusqu'\u00e0 256) : $arr [ TheliaEvents :: CUSTOMER_CREATEACCOUNT ] = [ [ 'create' , 127 ], [ 'createCustomerFluxCRM' , 127 ], [ 'beforeCreate' , 129 ], [ 'afterCreate' , 127 ], [ 'updateMainPhone' , 126 ], [ 'createHybridAuthData' , 126 ], [ 'handleIsRetailer' , 126 ] ]; La fonction va recevoir en param\u00e8tre l'\u00e9v\u00e8nement source et son nom, et peut ex\u00e9cuter des actions de persistance : public function create ( CustomerCreateOrUpdateEvent $event , $eventName , EventDispatcherInterface $dispatcher ) : void { $customer = new CustomerModel (); $this -> createOrUpdateCustomer ( $customer , $event , $dispatcher ); }","title":"Evenements"},{"location":"symfony/#commandes-utiles","text":"php bin/console debug:router : Liste toutes les routes php bin/console lint:twig : V\u00e9rifie les templates Twig php bin/console debug:twig : Liste les informations de Twig php bin/console make:controller <nom> : Cr\u00e9e un nouveau contr\u00f4leur","title":"Commandes utiles"},{"location":"thelia/","text":"Thelia Routes Ajouter une route Ajouter une entr\u00e9e dans le fichier XML dans Config/routing avec un id, le path de la route et le chemin du controlleur : <route id= \"admin.customer.list\" path= \"/admin/customers\" > <default key= \"_controller\" > ApyMyBox\\Controller\\ApyCustomerController::renderApyCustomerList </default> </route> Daus un template un lien vers la route pourra \u00eatre cr\u00e9\u00e9 : < a href = \"{url route_id='admin.customer.list' router='apymybox'}\" > Lien </ a > Commandes Doc Lister les commandes existantes (dans le conteneur PHP) : php Thelia Loops Doc Permet de lister et filtrer une collection d'instances de mod\u00e8les dans un template. < table > {loop name='apy_customers' type='apy_customers'} < tr > < td > {$firstname} </ td > </ tr > {/loop} </ table > name : nom unique dans le template type : nom de la classe Loop \u00e0 utiliser (d\u00e9clar\u00e9 dans config.xml ) On peut ajouter une condition en amont pour ne pas afficher un tableau vide si il n'y a pas de r\u00e9sultats par exemple : {ifloop rel=\"apy_customers\"} ...boucle... {/ifloop} Impl\u00e9mentation Cot\u00e9 backend il faut cr\u00e9er un fichier d\u00e9di\u00e9 dans le dossier Loop , par exemple ApyCustomerLoop . Cr\u00e9er une classe ApyCustomerLoop qui h\u00e9rite de la classe Thelia BaseI18nLoop et de PropelSearchLoopInterface pour cr\u00e9er une loop Propel. Elle doit impl\u00e9menter obligatoirement 3 fonctions : getArgDefinitions : d\u00e9crit les arguments (requis ou optionels, et types) de la loop. buildModelCriteria : cr\u00e9e la requ\u00eate Propel avec les diff\u00e9rents filtres, jointures etc... qui va retourner la collection d'objets. parseResults : cr\u00e9e les variables disponibles dans le template depuis les r\u00e9sultats de la requ\u00eate. D\u00e9clarer la loop dans config.xml dans l'attribut loops avec son nom unique et le chemin vers la classe : <loop name= \"apy_customers\" class= \"ApyMyBox\\Loop\\ApyCustomerLoop\" /> Exemple class ApyCustomerLoop extends BaseI18nLoop implements PropelSearchLoopInterface { protected function getArgDefinitions () : ArgumentCollection { return new ArgumentCollection (); } public function buildModelCriteria () : ModelCriteria { // liste des apyCustomers $apyCustomers = ApyCustomerQuery :: create (); // jointure sur la table customer $customerJoin = new Join ( ApyCustomerTableMap :: COL_CUSTOMER_ID , CustomerTableMap :: ID , Criteria :: INNER_JOIN ); $apyCustomers -> addJoinObject ( $customerJoin , 'customer_join' ) -> withColumn ( CustomerTableMap :: FIRSTNAME , 'firstname' ) -> withColumn ( CustomerTableMap :: LASTNAME , 'lastname' ) -> withColumn ( CustomerTableMap :: EMAIL , 'email' ) -> withColumn ( CustomerTableMap :: CREATED_AT , 'created_at' ); // jointure optionnelle sur la table lang $langJoin = new Join ( CustomerTableMap :: LANG_ID , LangTableMap :: ID , Criteria :: LEFT_JOIN ); $apyCustomers -> addJoinObject ( $langJoin , 'lang_join' ) -> withColumn ( LangTableMap :: TITLE , 'lang_title' ); // tri par apy_customer.id $apyCustomers -> orderById (); return $apyCustomers ; } public function parseResults ( LoopResult $loopResult ) { /** @var ApyCustomer $apyCustomer */ foreach ( $loopResult -> getResultDataCollection () as $apyCustomer ) { $loopResultRow = new LoopResultRow ( $apyCustomer ); $loopResultRow -> set ( 'id' , $apyCustomer -> getId ()); $loopResultRow -> set ( 'customerId' , $apyCustomer -> getCustomerId ()); $loopResultRow -> set ( 'firstName' , $apyCustomer -> getVirtualColumn ( 'firstname' )); $loopResultRow -> set ( 'lastName' , $apyCustomer -> getVirtualColumn ( 'lastname' )); $loopResultRow -> set ( 'email' , $apyCustomer -> getVirtualColumn ( 'email' )); $loopResultRow -> set ( 'createdAt' , $apyCustomer -> getVirtualColumn ( 'created_at' )); $loopResultRow -> set ( 'langTitle' , $apyCustomer -> getVirtualColumn ( 'lang_title' )); $loopResult -> addRow ( $loopResultRow ); } return $loopResult ; } }","title":"Thelia"},{"location":"thelia/#thelia","text":"","title":"Thelia"},{"location":"thelia/#routes","text":"","title":"Routes"},{"location":"thelia/#ajouter-une-route","text":"Ajouter une entr\u00e9e dans le fichier XML dans Config/routing avec un id, le path de la route et le chemin du controlleur : <route id= \"admin.customer.list\" path= \"/admin/customers\" > <default key= \"_controller\" > ApyMyBox\\Controller\\ApyCustomerController::renderApyCustomerList </default> </route> Daus un template un lien vers la route pourra \u00eatre cr\u00e9\u00e9 : < a href = \"{url route_id='admin.customer.list' router='apymybox'}\" > Lien </ a >","title":"Ajouter une route"},{"location":"thelia/#commandes","text":"Doc Lister les commandes existantes (dans le conteneur PHP) : php Thelia","title":"Commandes"},{"location":"thelia/#loops","text":"Doc Permet de lister et filtrer une collection d'instances de mod\u00e8les dans un template. < table > {loop name='apy_customers' type='apy_customers'} < tr > < td > {$firstname} </ td > </ tr > {/loop} </ table > name : nom unique dans le template type : nom de la classe Loop \u00e0 utiliser (d\u00e9clar\u00e9 dans config.xml ) On peut ajouter une condition en amont pour ne pas afficher un tableau vide si il n'y a pas de r\u00e9sultats par exemple : {ifloop rel=\"apy_customers\"} ...boucle... {/ifloop}","title":"Loops"},{"location":"thelia/#implementation","text":"Cot\u00e9 backend il faut cr\u00e9er un fichier d\u00e9di\u00e9 dans le dossier Loop , par exemple ApyCustomerLoop . Cr\u00e9er une classe ApyCustomerLoop qui h\u00e9rite de la classe Thelia BaseI18nLoop et de PropelSearchLoopInterface pour cr\u00e9er une loop Propel. Elle doit impl\u00e9menter obligatoirement 3 fonctions : getArgDefinitions : d\u00e9crit les arguments (requis ou optionels, et types) de la loop. buildModelCriteria : cr\u00e9e la requ\u00eate Propel avec les diff\u00e9rents filtres, jointures etc... qui va retourner la collection d'objets. parseResults : cr\u00e9e les variables disponibles dans le template depuis les r\u00e9sultats de la requ\u00eate. D\u00e9clarer la loop dans config.xml dans l'attribut loops avec son nom unique et le chemin vers la classe : <loop name= \"apy_customers\" class= \"ApyMyBox\\Loop\\ApyCustomerLoop\" />","title":"Impl\u00e9mentation"},{"location":"thelia/#exemple","text":"class ApyCustomerLoop extends BaseI18nLoop implements PropelSearchLoopInterface { protected function getArgDefinitions () : ArgumentCollection { return new ArgumentCollection (); } public function buildModelCriteria () : ModelCriteria { // liste des apyCustomers $apyCustomers = ApyCustomerQuery :: create (); // jointure sur la table customer $customerJoin = new Join ( ApyCustomerTableMap :: COL_CUSTOMER_ID , CustomerTableMap :: ID , Criteria :: INNER_JOIN ); $apyCustomers -> addJoinObject ( $customerJoin , 'customer_join' ) -> withColumn ( CustomerTableMap :: FIRSTNAME , 'firstname' ) -> withColumn ( CustomerTableMap :: LASTNAME , 'lastname' ) -> withColumn ( CustomerTableMap :: EMAIL , 'email' ) -> withColumn ( CustomerTableMap :: CREATED_AT , 'created_at' ); // jointure optionnelle sur la table lang $langJoin = new Join ( CustomerTableMap :: LANG_ID , LangTableMap :: ID , Criteria :: LEFT_JOIN ); $apyCustomers -> addJoinObject ( $langJoin , 'lang_join' ) -> withColumn ( LangTableMap :: TITLE , 'lang_title' ); // tri par apy_customer.id $apyCustomers -> orderById (); return $apyCustomers ; } public function parseResults ( LoopResult $loopResult ) { /** @var ApyCustomer $apyCustomer */ foreach ( $loopResult -> getResultDataCollection () as $apyCustomer ) { $loopResultRow = new LoopResultRow ( $apyCustomer ); $loopResultRow -> set ( 'id' , $apyCustomer -> getId ()); $loopResultRow -> set ( 'customerId' , $apyCustomer -> getCustomerId ()); $loopResultRow -> set ( 'firstName' , $apyCustomer -> getVirtualColumn ( 'firstname' )); $loopResultRow -> set ( 'lastName' , $apyCustomer -> getVirtualColumn ( 'lastname' )); $loopResultRow -> set ( 'email' , $apyCustomer -> getVirtualColumn ( 'email' )); $loopResultRow -> set ( 'createdAt' , $apyCustomer -> getVirtualColumn ( 'created_at' )); $loopResultRow -> set ( 'langTitle' , $apyCustomer -> getVirtualColumn ( 'lang_title' )); $loopResult -> addRow ( $loopResultRow ); } return $loopResult ; } }","title":"Exemple"}]}